{% set url = 'https://www.clanaod.net/forums/showthread.php?t=' %}
[center][img]https://i.imgur.com/PDOx3qw.png[/img]

[size=5][color=#FF0000][b][i][u]Division Leadership[/u][/i][/b][/color][/size][size=4]
{# iterate leaders #}
{% for leader in division.leaders %}
    
    [profile={{ leader.clan_id }}][color={{ leader.rank.color }}]{{ leader.present().rankName }}[/color][/profile] - {{ leader.position.name }}
{%- else %}
    TBA
{% endfor %}
[/size]

----------------------------------------------------------------------------------------------------------
[/center]
[center]
{% for platoon in division.platoons %}    
 {% if (loop.first) %}
        
    {% else %}
        
    {% endif %}
    {% if platoon.logo %}
        [center][img]{{ platoon.logo }}[/img][/center]
    {% else %}
    
    {% endif %}
    
    {% if platoon.name %}
        [size=4][color=ffff00]{{ platoon.name }}[/color][/size]
    {% else %}
        [size=4][color=ffff00]Untitled[/color][/size]
    {% endif %}
    [/center]
    [center]
    [size=3][color=#40E0D0] Company Commander[/color]
    {% if platoon.leader %}
        [profile={{ platoon.leader.clan_id }}][color=#00FF00]{{ platoon.leader.present().rankName }}[/color][/profile]
    {% else %}
        [color=#00FF00]TBA[/color]
    {% endif %}
    [/center][/size]
    [center]
    {# iterate squads #}
    [table='align:center, width: 900'][tr]
    {% for squad in platoon.squads %}
        [td="width:20%"]
        {% if squad.name %}
            [size=2][color=ffff00]{{ squad.name }}[/color][/size]
        {% else %}
            [size=2][color=ffff00]Untitled[/color][/size]
        {% endif %}[size=2][color=#40E0D0] Platoon Leader[/color]
        {% if squad.leader %}
            [profile={{ squad.leader.clan_id }}][color=#FFA500]{{ squad.leader.present().rankName }}[/color][/profile]
        {% else %}
            [color=#FFA500]TBA[/color]
        {% endif %}
        [/size]
 
           {%- for member in squad.members %}
              [profile={{ member.clan_id }}]{{member.present().rankName }}[/profile]
          {% endfor %}
        
        [/td]
    {% endfor %}
    
    [/tr][/table]
{% endfor %}
[/CENTER]



[HR][/HR]


[center][size=3][color="#FF0000"][b]Part Time Members[/b][/color][/size][/center]

[table='align:center'][tr][td]
{% for member in division.partTimeMembers %}
  [size=1][profile={{ member.clan_id }}]AOD_{{ member.name }}[/profile][/size]
  {% if loop.index is divisible by(20) %}
    [/td][td]
  {% endif %}
{% endfor %}
[/td][/tr][/table]

[hr][/hr]

{% if division.leave %}
  [center][size=3][color="#FF0000"][b]Leave of Absences[/b][/color][/size][/center]
  [center][size=2][color="#FFFFFF"]
  {% for member in division.leave %}
    {% if member.leave.expired %}
      {{ member.present().rankName }} - [color="FF0000"]{{ member.leave.date }} (EXPIRED)[/color] - {{ member.leave.reason }}
    {% else %}
      {{ member.present().rankName }} - {{ member.leave.date }} - {{ member.leave.reason }}
    {% endif %}
  {% endfor %}[/size][/color]
  [/center]
{% endif %}

{# Defines each rank as a variable and assigns it a count of 0 before counting the rank #}
{% set Recruits = 0 %}
{% set Cadets = 0 %}
{% set Privates = 0 %}
{% set PrivatesFirst = 0 %}
{% set Specialists = 0 %}
{% set Officers = 0 %}

{# Goes through every member and asks if the members rank abbreviation matches what is in the string (such as Pvt) #}
{# If it does then it adds 1 to the variable associated with that rank, thus counting it #}
{% for platoon in division.platoons %}
  {% for squad in platoon.squads %}
    {% for member in squad.members %}
      {% if member.rank.abbreviation == "Rct" %}
        {% set Recruits = Recruits + 1 %}
      {% elseif member.rank.abbreviation == "Cdt" %}
        {% set Cadets = Cadets + 1 %}
      {% elseif member.rank.abbreviation == "Pvt" %}
        {% set Privates = Privates + 1 %}
      {% elseif member.rank.abbreviation == "Pfc" %}
        {% set PrivatesFirst = PrivatesFirst + 1 %}
      {% elseif member.rank.abbreviation == "Spec" %}
        {% set Specialists = Specialists + 1 %}
      {% endif %}
    {% endfor %}
  {% endfor %}
{% endfor %}
{# Instead of counting low population ranks, calculates officers as being the total division members, takeaway all already accounted members #}
{% set Officers = division.memberCount - Recruits - Cadets - Privates - PrivatesFirst - Specialists %}

[hr][/hr]

{# States how many of each rank there are in the division #}
[center][size=3][color="#FF0000"]Division Statistics[/color][/size][/center]
[center][size=2][color="#FFFFFF"]
[color="#FFDD99"]Recruits[/color] - {{ Recruits }}
[color="#FFDD99"]Cadets[/color] - {{ Cadets }}
[color="#FFDD99"]Privates[/color] - {{ Privates }}
[color="#FFDD99"]Private First Class[/color] - {{ PrivatesFirst }}
[color="#FFDD99"]Specialists[/color] - {{ Specialists }}
[color="#FF8C00"]Officers[/color] - {{ Officers }}

{# States how many members are in the division #}
[size=4][color="#FF8C00"]Total Full Time Members[/color] - {{ division.memberCount }}
[color="#FF8C00"]Total Part Time Members[/color] - {{ division.partTimeMembers.count() }}[/size]
[/color][/size][/center]
